# Beanstalk configuration for Docker deployment

option_settings:
  # Nginx proxy configuration
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: none

  # Health check configuration
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: HTTP:8080/health

  # Environment properties
  aws:elasticbeanstalk:application:environment:
    PORT: "8080"
    NODE_ENV: "production"
    API_GATEWAY_URL: "https://5lytll0x3l.execute-api.ap-northeast-2.amazonaws.com"
    COGNITO_REGION: "ap-northeast-2"
    COGNITO_USER_POOL_ID: "ap-northeast-2_aWJI6tXlz"
    COGNITO_CLIENT_ID: "45bms0br1qdsah2iiiqbc2fho7"

  # Managed updates
  aws:elasticbeanstalk:managedactions:
    ManagedActionsEnabled: true
    PreferredStartTime: "Sun:10:00"

  aws:elasticbeanstalk:managedactions:platformupdate:
    UpdateLevel: minor
    InstanceRefreshEnabled: true

  # Notifications (optional)
  aws:elasticbeanstalk:sns:topics:
    Notification Endpoint: ""

  # Enhanced health reporting
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced

  # CloudWatch logs
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: true
    RetentionInDays: 7
